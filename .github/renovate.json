{
  "$schema": "https://docs.renovatebot.com/renovate-schema.json",
  "extends": [
    "config:recommended"
  ],
  "labels": ["dependencies"],
  "packageRules": [
    {
      "description": "Group all Bootlin musl toolchain updates together",
      "matchManagers": ["regex"],
      "matchPackageNames": ["bootlin-musl-toolchain"],
      "groupName": "Bootlin musl toolchains"
    }
  ],
  "regexManagers": [
    {
      "description": "Update Bootlin musl toolchain versions in build scripts",
      "fileMatch": [
        "^native/build-linux.*\\.sh$"
      ],
      "matchStrings": [
        "# Use Bootlin's stable (?<architecture>[^ ]+) musl toolchain.*\\n.*TOOLCHAIN_URL=\"https://toolchains\\.bootlin\\.com/downloads/releases/toolchains/[^/]+/tarballs/[^-]+-[^-]+--musl--(?<currentValue>stable-[0-9.]+-[0-9]+)\\.tar\\.xz\""
      ],
      "datasourceTemplate": "custom.bootlin-toolchains",
      "depNameTemplate": "bootlin-musl-toolchain",
      "packageNameTemplate": "bootlin-musl-toolchain-{{{architecture}}}",
      "versioningTemplate": "regex:^stable-(?<major>\\d{4})\\.(?<minor>\\d{2})-(?<patch>\\d+)$"
    }
  ],
  "customDatasources": {
    "bootlin-toolchains": {
      "description": "Bootlin stable musl toolchains from toolchains.bootlin.com",
      "defaultRegistryUrlTemplate": "https://toolchains.bootlin.com/downloads/releases/toolchains/",
      "format": "html",
      "transformTemplates": [
        "{\"releases\": $map($distinct($match(/href=\"[^\"]*--musl--stable-([0-9.]+-[0-9]+)\\.tar\\.xz\"/).match), function($v) { {\"version\": $v} })}"
      ]
    }
  },
  "schedule": [
    "before 3am on Monday"
  ]
}
