/* Version script for libarchive.so - export only the API functions needed by libarchive.net */
/* Plus essential musl runtime symbols that must remain visible for the library to function */
{
    global:
        /* libarchive API */
        archive_entry_filetype;
        archive_entry_free;
        archive_entry_new;
        archive_entry_pathname;
        archive_entry_set_filetype;
        archive_entry_set_mtime;
        archive_entry_set_pathname;
        archive_entry_set_perm;
        archive_entry_set_size;
        archive_entry_size;
        archive_entry_size_is_set;
        archive_error_string;
        archive_read_add_passphrase;
        archive_read_data;
        archive_read_free;
        archive_read_has_encrypted_entries;
        archive_read_new;
        archive_read_next_header;
        archive_read_open;
        archive_read_open_filename;
        archive_read_open_filenames;
        archive_read_support_filter_all;
        archive_read_support_format_all;
        archive_write_add_filter_bzip2;
        archive_write_add_filter_compress;
        archive_write_add_filter_gzip;
        archive_write_add_filter_lz4;
        archive_write_add_filter_lzip;
        archive_write_add_filter_lzma;
        archive_write_add_filter_xz;
        archive_write_add_filter_zstd;
        archive_write_close;
        archive_write_data;
        archive_write_finish_entry;
        archive_write_free;
        archive_write_header;
        archive_write_new;
        archive_write_open;
        archive_write_open_filename;
        archive_write_set_bytes_in_last_block;
        archive_write_set_bytes_per_block;
        archive_write_set_filter_option;
        archive_write_set_format_7zip;
        archive_write_set_format_cpio_newc;
        archive_write_set_format_iso9660;
        archive_write_set_format_pax;
        archive_write_set_format_pax_restricted;
        archive_write_set_format_ustar;
        archive_write_set_format_xar;
        archive_write_set_format_zip;
        archive_write_set_options;
        archive_write_set_passphrase;

        /* musl runtime symbols - required for embedded static libc to function */
        __errno_location;      /* errno access */
        __stack_chk_fail;      /* stack protector */
        __stack_chk_guard;     /* stack protector */

        /* Linker-defined symbols for init/fini arrays - use wildcards for linker symbols */
        __init_array*;
        __fini_array*;

    local:
        *;
};
